/**
 * @file Record.c
 * @brief
 */

/*****************************************************************************/
/* INCLUDES                                                                  */
/*****************************************************************************/
#include "Record.h"

#include <string.h>
#include "ch.h"
#include "hal.h"
#include "chprintf.h"

/*****************************************************************************/
/* DEFINED CONSTANTS                                                         */
/*****************************************************************************/

/*****************************************************************************/
/* TYPE DEFINITIONS                                                          */
/*****************************************************************************/

/*****************************************************************************/
/* MACRO DEFINITIONS                                                         */
/*****************************************************************************/

/*****************************************************************************/
/* DEFINITION OF GLOBAL CONSTANTS AND VARIABLES                              */
/*****************************************************************************/

/*****************************************************************************/
/* DECLARATION OF LOCAL FUNCTIONS                                            */
/*****************************************************************************/

/*****************************************************************************/
/* DEFINITION OF LOCAL FUNCTIONS                                             */
/*****************************************************************************/

/*****************************************************************************/
/* DEFINITION OF GLOBAL FUNCTIONS                                            */
/*****************************************************************************/
size_t REC_Serialize(const Record_t *rec, uint32_t id, char obuf[], size_t olen)
{
  memset(obuf, 0, olen);
  chsnprintf(obuf, olen,
             "record[%d]=%d,%s,%d,%d,%d,%d,%d,%d,%d,%f,%f,%d,%d,%f,%d",
             id,
             rec->deviceId,
             rec->vehicleId,
             rec->year,
             rec->month,
             rec->day,
             rec->hour,
             rec->minute,
             rec->second,
             rec->utcOffset,
             rec->latitude,
             rec->longitude,
             rec->speed,
             rec->numOfSatInUse,
             rec->batteryVoltage,
             rec->systemMode
             );

  return strlen(obuf);
}

/****************************** END OF FILE **********************************/
