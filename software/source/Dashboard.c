/**
 * @file Dashboard.c
 * @brief
 */

/*****************************************************************************/
/* INCLUDES                                                                  */
/*****************************************************************************/
#include "Dashboard.h"
#include "ch.h"

#include <string.h>

/*****************************************************************************/
/* DEFINED CONSTANTS                                                         */
/*****************************************************************************/

/*****************************************************************************/
/* TYPE DEFINITIONS                                                          */
/*****************************************************************************/
typedef struct {
    mutex_t lock;
    Position_t position;
} Dashboard_t;

/*****************************************************************************/
/* MACRO DEFINITIONS                                                         */
/*****************************************************************************/

/*****************************************************************************/
/* DEFINITION OF GLOBAL CONSTANTS AND VARIABLES                              */
/*****************************************************************************/
static Dashboard_t dashboard;

/*****************************************************************************/
/* DECLARATION OF LOCAL FUNCTIONS                                            */
/*****************************************************************************/

/*****************************************************************************/
/* DEFINITION OF LOCAL FUNCTIONS                                             */
/*****************************************************************************/

/*****************************************************************************/
/* DEFINITION OF GLOBAL FUNCTIONS                                            */
/*****************************************************************************/
void dbInit(void) {
    memset(&dashboard, 0, sizeof(dashboard));
    chMtxObjectInit(&dashboard.lock);
}

void dbLock(void) {
    chMtxLock(&dashboard.lock);
}

void dbUnlock(void) {
    chMtxUnlock(&dashboard.lock);
}

Position_t *dbGetPosition(void) {
    return &dashboard.position;
}

/****************************** END OF FILE **********************************/
